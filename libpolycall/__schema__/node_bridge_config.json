{
  "$schema": "https://obinexus.com/schemas/bridge-config-v2.0.json",
  "bridge_version": "2.0.0",
  "language": "node",
  "binding_type": "driver",
  
  "runtime_config": {
    "node_version": "18.0.0+",
    "npm_version": "9.0.0+",
    "package_manager": "npm",
    "server_file": "server.js",
    "entry_point": "index.js"
  },

  "protocol_separation": {
    "protocol_module": "nodepolycall/protocol",
    "communication_layer": "nodepolycall/protocol/marshalling.js",
    "state_sync": "nodepolycall/protocol/state-manager.js",
    "cryptographic_layer": "nodepolycall/protocol/crypto-handler.js",
    "bypass_protocol": false
  },

  "ffi_interface": {
    "version": "2.0",
    "allowed_methods": [
      "dop_adapter_init",
      "dop_adapter_invoke",
      "dop_adapter_get_state", 
      "dop_adapter_reset",
      "dop_adapter_destroy"
    ],
    "method_binding": "node-ffi-napi",
    "library_path": "libpolycall_dop.so",
    "async_mode": true
  },

  "resource_limits": {
    "default_memory_mb": 32,
    "max_memory_mb": 128,
    "default_cpu_time_ms": 2000,
    "max_cpu_time_ms": 15000,
    "max_event_loop_delay_ms": 100,
    "max_file_descriptors": 16,
    "network_isolation": "container"
  },

  "security_policy": {
    "isolation_level": "container",
    "allow_child_process": false,
    "allow_network": "restricted",
    "allow_filesystem_write": false,
    "cryptographic_validation": "mandatory",
    "state_validation": true,
    "sandbox_vm": true
  },

  "component_specific_configs": {
    "ads_service": {
      "module": "./ads/server.js",
      "class": "AdsServiceServer",
      "security_level": "untrusted",
      "isolation": "paranoid",
      "memory_limit_mb": 8,
      "cpu_time_limit_ms": 2000,
      "network_access": "outbound_only",
      "file_access": "none",
      "required_packages": [
        "express@^4.18.0",
        "helmet@^7.0.0",
        "nodepolycall@^2.0.0"
      ]
    },

    "api_gateway": {
      "module": "./gateway/server.js", 
      "class": "ApiGatewayServer",
      "security_level": "standard",
      "isolation": "container",
      "memory_limit_mb": 64,
      "cpu_time_limit_ms": 5000,
      "network_access": "bidirectional",
      "file_access": "read_only",
      "required_packages": [
        "fastify@^4.21.0",
        "ajv@^8.12.0",
        "nodepolycall@^2.0.0"
      ]
    }
  },

  "performance_optimization": {
    "v8_flags": [
      "--max-old-space-size=128",
      "--optimize-for-size"
    ],
    "garbage_collection": "aggressive",
    "cluster_mode": false,
    "worker_threads": false
  },

  "telemetry": {
    "enabled": true,
    "silent_observation": true,
    "metrics": [
      "memory_usage",
      "cpu_time",
      "event_loop_lag", 
      "invocation_count",
      "error_rate",
      "response_time"
    ],
    "export_format": "prometheus",
    "guid_tracking": true
  },

  "error_handling": {
    "graceful_degradation": true,
    "error_isolation": true,
    "recovery_mechanism": "bounded_delta_replay",
    "max_retry_attempts": 3,
    "timeout_escalation": true,
    "uncaught_exception_handler": true
  },

  "development_tools": {
    "debug_mode": false,
    "profiling": false,
    "hot_reload": false,
    "source_maps": false,
    "inspector": false
  },

  "automation": {
    "auto_discovery": true,
    "cli_integration": true,
    "polycall_file_support": true,
    "folder_mapping": {
      "scan_pattern": "**/*server.js",
      "auto_register": true,
      "namespace_detection": true
    }
  },

  "state_management": {
    "state_validation": true,
    "schema_enforcement": true,
    "delta_compression": true,
    "checkpoint_interval": 1000,
    "recovery_enabled": true
  }
}
